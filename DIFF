local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local dupeEvent = ReplicatedStorage:WaitForChild("DupeEvent")

-- Create the GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DupeGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local dupeButton = Instance.new("TextButton")
dupeButton.Name = "DupeButton"
dupeButton.Size = UDim2.new(0, 150, 0, 50)
dupeButton.Position = UDim2.new(0.5, -75, 0.8, 0)
dupeButton.Text = "Dupe (Server)"
dupeButton.TextSize = 24
dupeButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0) -- Green for success
dupeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
dupeButton.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = dupeButton

-- When clicked, tell the server to do the work
dupeButton.MouseButton1Click:Connect(function()
	dupeEvent:FireServer()
end)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local dupeEvent = ReplicatedStorage:WaitForChild("DupeEvent")

dupeEvent.OnServerEvent:Connect(function(player)
	local targetName = "trophyWitch"
	local item = nil
	
	-- 1. Check Player's Backpack (Inventory)
	if player.Backpack:FindFirstChild(targetName) then
		item = player.Backpack[targetName]
		
	-- 2. Check Player's Character (Currently Equipped)
	elseif player.Character and player.Character:FindFirstChild(targetName) then
		item = player.Character[targetName]
	end
	
	-- 3. If item found, server increases the amount
	if item then
		local amountObj = item:FindFirstChild("Amount")
		if amountObj then
			amountObj.Value = amountObj.Value + 1
			print(player.Name .. " duped " .. targetName .. ". New Amount: " .. amountObj.Value)
		end
	end
end)
